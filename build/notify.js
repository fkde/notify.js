(()=>{var P=Object.defineProperty,j=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var f=(n,t,e)=>t in n?P(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,u=(n,t)=>{for(var e in t||(t={}))A.call(t,e)&&f(n,e,t[e]);if(M)for(var e of M(t))z.call(t,e)&&f(n,e,t[e]);return n},L=(n,t)=>j(n,R(t));var a=(n,t,e)=>(f(n,typeof t!="symbol"?t+"":t,e),e),J=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)};var S=(n,t,e)=>(J(n,t,"read from private field"),e?e.call(n):t.get(n)),T=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)};var v=class{constructor(){a(this,"errorMessage","")}validate(t){throw new Error("Must be implemented by children.")}getErrorMessage(){return this.errorMessage}},i=v;var w=class extends i{constructor(){super(...arguments);a(this,"errorMessage","The field must not be empty.")}validate(e){return!!e.length}},l=w;var O={"Value may only consist of chars.":"Der Wert darf nur Buchstaben enthalten.","The field must not be empty.":"Das Feld darf nicht leer sein.","Only numbers between %s and %s are allowed.":"Nur Zahlen zwischen ${min} und ${max} sind erlaubt."};var g=class{translate(t){return O[t]||t}};function y(n){return new g().translate(n)}var h=class{constructor(t,e={}){this.message=t,this.options=e,this.container=null,this.render()}render(){let t=this.options.timeout||3e3,e=y(this.message),r='<div class="toast notificator top-right">'.concat(e,"</div>");this.container=new DOMParser().parseFromString(r,"text/html").body.firstElementChild,this.options.targetContainer instanceof HTMLDivElement?this.options.targetContainer.prepend(this.container):document.body.appendChild(this.container),setTimeout(()=>{this.container.classList.add("closing"),this.container.addEventListener("animationend",o=>{o.target.parentNode.removeChild(o.target)})},t)}};function b(n,t){if(typeof n=="string")return new h(n,t);let e=document.querySelector(".notificator-wrap");e instanceof HTMLDivElement||(e=new DOMParser().parseFromString('<div class="notificator-wrap"></div>',"text/html").body.firstElementChild,document.body.appendChild(e));for(let r in Object.keys(n)){let o=n[r];setTimeout(function(){new h(o,L(u({},t),{targetContainer:e}))},50)}}var p,x=class{constructor(t,e,r){T(this,p,{style:{backgroundColor:"#29303C"},showInput:!1,confirmButtonText:"Ja",cancelButtonText:"Nein",showCancelButton:!0,validators:[new l]});this.message=t,this.options=u(u({},S(this,p)),e),this.promise=r,this.container=null}bindClickEvents(){let t=this.container.querySelector(".input"),e=this.container.querySelector(".confirm"),r=this.container.querySelector(".cancel");t&&t.addEventListener("keydown",o=>{o.keyCode===13&&(o.preventDefault(),e.click())}),e.addEventListener("click",()=>{let o=t instanceof HTMLDivElement?t.textContent:null,m=this.runValidators(o,t);if(m.length){t.classList.add("error"),t.focus();let c=document.createRange(),d=window.getSelection();t.textContent.length&&(c.setStart(t.childNodes[0],o.length),c.collapse(!0),d.removeAllRanges(),d.addRange(c)),b(m);return}this.promise.resolve(o||!0),this.remove()}),r instanceof HTMLDivElement&&r.addEventListener("click",()=>{this.promise.resolve(!1),this.remove()})}runValidators(t){let e=[];if(this.options.showInput&&Object.keys(this.options.validators).length)for(let r in this.options.validators){let o=this.options.validators[r];if(o instanceof i&&o.validate(t)===!1)return e.push(o.errorMessage),e}return e}render(){let t=this.options.showInput===!0?'<div class="input" contenteditable="true"></div>':"",e=this.options.showCancelButton===!0?'<div class="button cancel">'.concat(this.options.cancelButtonText,"</div>"):"",r=e?"":" single",o='\n            <div class="notificator promptness">\n                <div class="close"></div>\n                <div class="message">'.concat(this.message,"</div>\n                ").concat(t,'\n                <div class="container').concat(r,'">\n                    <div class="button confirm">').concat(this.options.confirmButtonText,"</div>\n                    ").concat(e,"\n                </div>\n            </div>");this.container=new DOMParser().parseFromString(o,"text/html").body.firstElementChild,document.body.appendChild(this.container),this.options.showInput&&this.container.querySelector(".input").focus()}remove(){this.container.classList.add("closing"),this.container.addEventListener("animationend",()=>{this.container.parentNode&&this.container.parentNode.removeChild(this.container)})}};p=new WeakMap;var $=prompt=(n,t)=>new Promise((e,r)=>{let o=new x(n,t,{resolve:e,reject:r});o.render(),o.bindClickEvents()});var Z=(n,t={})=>{let e={backgroundColor:t.backgroundColor||"#202020"};return new Promise((r,o)=>{let m=()=>{try{c(),d()}catch(s){o(s)}},c=()=>{let s='\n                <div class="notificator alertness">\n                    '.concat(n,'\n                    <div class="container single">\n                        <div class="button confirm">Ok</div>\n                    </div>\n                </div>');document.body.appendChild(new DOMParser().parseFromString(s,"text/html").body.firstElementChild),d()},d=()=>{let s=document.querySelector(".alertness"),H=document.querySelector(".alertness .confirm");s.addEventListener("keydown",Q=>{console.log("hallo")}),H.addEventListener("click",()=>{r(!0),I()})},I=()=>{let s=document.querySelector(".alertness");s.classList.add("closing"),s.addEventListener("animationend",()=>{s.parentNode&&s.parentNode.removeChild(s)})};return m()})},D=Z;var C=class extends i{constructor(e,r){super();a(this,"errorMessage","Only numbers between %s and %s are allowed.");this.min=e,this.max=r,this.errorMessage="Only numbers between ".concat(e," and ").concat(r," are allowed.")}validate(e){return!isNaN(e)&&e>=this.min&&e<=this.max}},N=C;var E=class extends i{constructor(t){super(),this.allowedValues=t,this.errorMessage="Does not comply to expected values. Allowed values are [".concat(t.join(", "),"]")}validate(t){return this.allowedValues.indexOf(t)!==-1}},q=E;var k=class extends i{constructor(){super(...arguments);a(this,"errorMessage","Value may only consist of chars.")}validate(e){return typeof e=="string"&&/[a-zA-Z]+/.test(e)}},B=k;var V=[{title:"What's your name?",validators:[new l,new B]},{title:"How old are you?",validators:[new l,new N(16,99)]},{title:"In which country do you live in?",validators:[new l,new q(["Germany","France","Japan"])]}],F=[],G=async()=>{for(let n in V){let t=V[n],e=await $(t.title,{showInput:!0,confirmButtonText:"Next",cancelButtonText:"Cancel",validators:[...t.validators]});if(e===!1)break;F.push({question:t.title,answer:e})}return F};G().then(n=>{n.length&&(D("Thank you for your answers, "+n[0].answer+"!"),console.log(n))});})();
//# sourceMappingURL=notify.js.map
